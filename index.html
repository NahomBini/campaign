<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AIA TERMINAL</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; font-family: 'Courier New', monospace; }
        :root {
            --terminal-bg: #0c0c14; --terminal-text: #b0b0d0; --terminal-green: #20c997;
            --terminal-blue: #4dabf7; --terminal-red: #ff6b6b; --terminal-cyan: #3bc9db;
        }
        body { background: #000; color: var(--terminal-text); height: 100vh; overflow: hidden; }
        .terminal-container { width: 100%; height: 100vh; background: var(--terminal-bg); display: flex; flex-direction: column; }
        .terminal-header { padding: 10px 15px; border-bottom: 1px solid #2d2d4d; background: rgba(20,20,35,0.9); color: var(--terminal-blue); font-size: 0.8rem; }
        .terminal-output { flex: 1; overflow-y: auto; padding: 15px; line-height: 1.4; font-size: 0.9rem; }
        .terminal-line { margin-bottom: 8px; opacity: 0; animation: fadeIn 0.2s forwards; }
        @keyframes fadeIn { to { opacity: 1; } }
        .terminal-input-area { padding: 10px 15px; border-top: 1px solid #2d2d4d; background: rgba(20,20,35,0.9); }
        .terminal-input { display: flex; align-items: center; }
        .input-line { color: var(--terminal-green); margin-right: 8px; font-weight: 600; }
        #userInput { background: transparent; border: none; color: var(--terminal-cyan); width: 100%; outline: none; padding: 5px 0; }
        .cursor { width: 6px; height: 16px; background: var(--terminal-cyan); margin-left: 5px; animation: blink 1s infinite; }
        @keyframes blink { 0%,100% { opacity: 1; } 50% { opacity: 0.3; } }
        .command-text { color: var(--terminal-green); }
        .success-text { color: var(--terminal-green); }
        .danger-text { color: var(--terminal-red); }
        .ascii-art { color: var(--terminal-blue); white-space: pre; font-size: 0.6rem; line-height: 1; margin: 10px 0; text-align: center; }
        .countdown { position: fixed; top: 50%; left: 50%; transform: translate(-50%,-50%); font-size: 4rem; color: var(--terminal-red); z-index: 1000; font-weight: bold; }
        .black-screen { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: #000; display: none; justify-content: center; align-items: center; z-index: 2000; flex-direction: column; }
        ::-webkit-scrollbar { width: 6px; }
        ::-webkit-scrollbar-track { background: rgba(30,30,50,0.2); }
        ::-webkit-scrollbar-thumb { background: var(--terminal-blue); border-radius: 3px; }
    </style>
</head>
<body>
    <div class="terminal-container" id="terminal">
        <div class="terminal-header">
            <div>AIA TERMINAL v3.0 // SECURE CONNECTION</div>
            <div id="statusText">AWAITING AGENT</div>
        </div>
        <div class="terminal-output" id="output"></div>
        <div class="terminal-input-area">
            <div class="terminal-input">
                <div class="input-line" id="promptLine">agent@terminal:~$</div>
                <input type="text" id="userInput" autocomplete="off" autofocus placeholder="">
                <div class="cursor"></div>
            </div>
        </div>
    </div>
    <div class="black-screen" id="blackScreen">
        <div id="countdownDisplay" class="countdown"></div>
    </div>
    <script>
        const output = document.getElementById('output');
        const userInput = document.getElementById('userInput');
        const promptLine = document.getElementById('promptLine');
        const statusText = document.getElementById('statusText');
        const blackScreen = document.getElementById('blackScreen');
        const countdownDisplay = document.getElementById('countdownDisplay');

        let agentName = "";
        let missionStage = "init";
        let awaitingCommand = false;
        let currentExpectedCommand = "";

        function updateStatus(newStatus) {
            statusText.textContent = newStatus;
        }

        function addOutputLine(text, className = "") {
            const line = document.createElement('div');
            line.className = `terminal-line ${className}`;
            line.textContent = text;
            output.appendChild(line);
            output.scrollTop = output.scrollHeight;
        }

        function typeText(text, className = "", delay = 5, callback = null) {
            let i = 0;
            const line = document.createElement('div');
            line.className = `terminal-line ${className}`;
            output.appendChild(line);
            
            const typeInterval = setInterval(() => {
                if (i < text.length) {
                    line.textContent += text.charAt(i);
                    i++;
                    output.scrollTop = output.scrollHeight;
                } else {
                    clearInterval(typeInterval);
                    if (callback) callback();
                }
            }, delay);
        }

        function quickCommand(text, result, nextCommand, nextHint) {
            addOutputLine(`${promptLine.textContent} ${text}`);
            setTimeout(() => {
                addOutputLine(result);
                setTimeout(() => {
                    if (nextHint) addOutputLine(nextHint, "command-text");
                    if (nextCommand) {
                        awaitingCommand = true;
                        currentExpectedCommand = nextCommand;
                    }
                }, 200);
            }, 300);
        }

        function initializeTerminal() {
            const ascii = `
            ╔══════════════════════════════╗
            ║   AIA - SECURE TERMINAL      ║
            ║      ACCESS GRANTED          ║
            ╚══════════════════════════════╝
            `;
            addOutputLine(ascii, "ascii-art");
            addOutputLine("");
            typeText("CONNECTED TO AIA NETWORK", "success-text", 10, () => {
                setTimeout(() => {
                    addOutputLine("Enter agent name:", "command-text");
                    userInput.focus();
                }, 300);
            });
        }

        function handleBriefing() {
            updateStatus("MISSION ACTIVE");
            addOutputLine("MISSION: Vet Nahom for IT Rep", "success-text");
            addOutputLine("GOAL: Quick assessment", "command-text");
            addOutputLine("");
            quickCommand("scan", "Scanning... Found: server.ala.edu", "connect", "Type: connect");
        }

        function handleConnect() {
            quickCommand("connect", "Connected to target server", "hack", "Type: hack");
        }

        function handleHack() {
            quickCommand("hack", "Bypassing security... Access granted!", "find", "Type: find");
        }

        function handleFind() {
            quickCommand("find", "Found encrypted file: manifesto.enc", "decrypt", "Type: decrypt 172025");
        }

        function handleDecrypt() {
            quickCommand("decrypt 172025", "Decryption successful! Manifesto unlocked.", "view", "Type: view");
        }

        function handleView() {
            addOutputLine(`${promptLine.textContent} view`);
            setTimeout(() => {
                addOutputLine("=== TARGET MANIFESTO ===", "command-text");
                addOutputLine("1. Campus Digital Hub", "success-text");
                addOutputLine("2. Coding Challenges", "success-text");
                addOutputLine("3. Tech Workshops", "success-text");
                addOutputLine("");
                addOutputLine("Ready to vote?", "command-text");
                addOutputLine("Type: vote [1-10]", "command-text");
                awaitingCommand = true;
                currentExpectedCommand = "vote";
            }, 300);
        }

        function handleVote(rating) {
            const num = parseInt(rating);
            if (isNaN(num) || num < 1 || num > 10) {
                addOutputLine("Invalid. Type: vote [1-10]", "danger-text");
                awaitingCommand = true;
                currentExpectedCommand = "vote";
                return false;
            }
            
            addOutputLine(`${promptLine.textContent} vote ${num}`);
            setTimeout(() => {
                addOutputLine(`Vote recorded: ${num}/10`, "success-text");
                addOutputLine("");
                showFinalMessage();
            }, 300);
            return true;
        }

        function showFinalMessage() {
            const finalText = `
╔══════════════════════════════╗
║     MISSION COMPLETE         ║
║   VOTE NAHOM - IT REP        ║
╚══════════════════════════════╝
            `;
            
            addOutputLine(finalText, "ascii-art");
            addOutputLine("", "");
            addOutputLine("Terminal shutting down...", "danger-text");
            
            setTimeout(() => {
                startCountdown();
            }, 1500);
        }

        function startCountdown() {
            document.getElementById('terminal').style.display = 'none';
            blackScreen.style.display = 'flex';
            
            let count = 3;
            countdownDisplay.textContent = count;
            
            const countdownInterval = setInterval(() => {
                count--;
                if (count > 0) {
                    countdownDisplay.textContent = count;
                } else {
                    countdownDisplay.textContent = "0";
                    clearInterval(countdownInterval);
                    setTimeout(() => {
                        window.close();
                    }, 300);
                }
            }, 800);
        }

        userInput.addEventListener('keydown', function(e) {
            if (e.key === 'Enter') {
                const input = this.value.trim();
                this.value = '';
                
                if (input === '') return;
                
                if (awaitingCommand) {
                    if (currentExpectedCommand === "vote" && input.startsWith('vote ')) {
                        handleVote(input.split(' ')[1]);
                    } else if (input === currentExpectedCommand) {
                        awaitingCommand = false;
                        if (input === "briefing") handleBriefing();
                        else if (input === "scan") quickCommand("scan", "Scanning...", "connect", "Type: connect");
                        else if (input === "connect") handleConnect();
                        else if (input === "hack") handleHack();
                        else if (input === "find") handleFind();
                        else if (input === "decrypt 172025") handleDecrypt();
                        else if (input === "view") handleView();
                    } else {
                        addOutputLine(`Type: ${currentExpectedCommand}`, "command-text");
                        awaitingCommand = true;
                    }
                } else if (missionStage === "init") {
                    agentName = input || "Agent";
                    missionStage = "briefing";
                    promptLine.textContent = `${agentName.toLowerCase()}@aia:~$`;
                    updateStatus("AGENT CONFIRMED");
                    
                    setTimeout(() => {
                        addOutputLine(`Welcome Agent ${agentName}`, "success-text");
                        addOutputLine("Type: briefing", "command-text");
                        awaitingCommand = true;
                        currentExpectedCommand = "briefing";
                    }, 300);
                }
                
                this.focus();
            }
        });

        window.addEventListener('load', initializeTerminal);
    </script>
</body>
</html>
